/*! Chess.js v0.10.3 | (c) 2017 Chris Oakman | MIT License chessboardjs.com/license */
!function(e){var n={WHITE:"w",BLACK:"b"},r={PAWN:"p",KNIGHT:"n",BISHOP:"b",ROOK:"r",QUEEN:"q",KING:"k"},t={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},o={},a={};o[r.PAWN]="p",o[r.KNIGHT]="n",o[r.BISHOP]="b",o[r.ROOK]="r",o[r.QUEEN]="q",o[r.KING]="k",a.p="pawn",a.n="knight",a.b="bishop",a.r="rook",a.q="queen",a.k="king";var s=function(e){return e===r.PAWN||e===r.KNIGHT||e===r.BISHOP||e===r.ROOK||e===r.QUEEN||e===r.KING},u=function(e){return e===n.WHITE||e===n.BLACK},c=function(e){return e===t.NORMAL||e===t.CAPTURE||e===t.BIG_PAWN||e===t.PROMOTION||e===t.KSIDE_CASTLE||e===t.QSIDE_CASTLE},i=function(){this.board=new Uint8Array(120),this.board_state=[],this.kings={w:e,b:e},this.turn=n.WHITE,this.castling={w:0,b:0},this.ep_square=e,this.halfmoves=0,this.fullmoves=1,this.history=[],this.comments={},this.reset()};i.prototype.reset=function(){this.board=new Uint8Array(120),this.kings={w:e,b:e},this.turn=n.WHITE,this.castling={w:0,b:0},this.ep_square=e,this.halfmoves=0,this.fullmoves=1,this.history=[],this.comments={},this._epd_counter=0;for(var n=0;n<120;n++)this.board[n]=o.EMPTY;this.board[0]=r.ROOK,this.board[1]=r.KNIGHT,this.board[2]=r.BISHOP,this.board[3]=r.QUEEN,this.board[4]=r.KING,this.board[5]=r.BISHOP,this.board[6]=r.KNIGHT,this.board[7]=r.ROOK;for(var t=8;t<16;t++)this.board[t]=r.PAWN;for(var o=0;o<8;o++)this.board[112+o]=r.PAWN;this.board[112]=r.ROOK,this.board[113]=r.KNIGHT,this.board[114]=r.BISHOP,this.board[115]=r.QUEEN,this.board[116]=r.KING,this.board[117]=r.BISHOP,this.board[118]=r.KNIGHT,this.board[119]=r.ROOK,this.kings.w=4,this.kings.b=116,this.castling.w=3,this.castling.b=3};var l=function(e,n){for(var r=0;r<n;r++)this.board[e+r]=o.EMPTY};i.prototype.fen=function(){var e="",n=0;for(var t in this.board)switch(this.board[t]){case o.EMPTY:n++;break;default:n>0&&(e+=n,n=0),e+=o[this.board[t]];break}return n>0&&(e+=n),e+=" "+this.turn,e+=" "+("w"===this.turn?this.castling.w:this.castling.b),e},i.prototype.load=function(e){if("string"!=typeof e)return!1;var n=e.split(/\s+/);if(1===n.length){var t=n[0].split("/");if(8!==t.length)return!1;this.reset();var a=0;for(var s in t){var u=0;for(var c in t[s]){var i=t[s][c];if(/^\d+$/.test(i))u+=parseInt(i,10);else{if(!/^[pnbrqkPNBRQK]+$/.test(i))return!1;this.board[a+u]=function(e){return e===e.toUpperCase()?r[{P:"PAWN",N:"KNIGHT",B:"BISHOP",R:"ROOK",Q:"QUEEN",K:"KING"}[e]]+n.WHITE:r[{p:"PAWN",n:"KNIGHT",b:"BISHOP",r:"ROOK",q:"QUEEN",k:"KING"}[e]]+n.BLACK}(i),u++}}}a+=8}return this.castling.w=15,this.castling.b=15,this.turn=n.WHITE,this.kings.w=4,this.kings.b=116,!0}if(n.length<4)return!1;var l=n[0].split("/");if(8!==l.length)return!1;this.reset();var p=0;for(var f in l)for(var h=0;h<l[f].length;h++){var g=l[f][h];if(/^\d+$/.test(g))p+=parseInt(g,10);else{if(/^[pnbrqkPNBRQK]+$/.test(g)){this.board[p]=(d=g,d===d.toUpperCase()?r[{P:"PAWN",N:"KNIGHT",B:"BISHOP",R:"ROOK",Q:"QUEEN",K:"KING"}[d]]+n.WHITE:r[{p:"PAWN",n:"KNIGHT",b:"BISHOP",r:"ROOK",q:"QUEEN",k:"KING"}[d]]+n.BLACK);var d;p++}}}this.turn=n[1];var m=!1;n[2].includes("K")&&(this.castling.w|=1),n[2].includes("Q")&&(this.castling.w|=2),n[2].includes("k")&&(this.castling.b|=1),n[2].includes("q")&&(this.castling.b|=2),this.ep_square="-"!==n[3]?h=function(e){for(var n=0;n<64;n++)if((e[n>>>3]&1<<(7&n))!=0)return n;return e}(new Uint8Array([n[3].charCodeAt(0)-97,parseInt(n[3][1],10)-1])):e;for(var v in this.board)if(this.board[v]&r.KING){var b=this.board[v]&n.WHITE?1:2;b===1?this.kings.w=v:this.kings.b=v}return!0},window.Chess=i}("undefined"==typeof exports?window:exports);
